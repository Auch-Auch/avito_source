package com.avito.android.autogenerated_value;

import a2.b.a.a.a;
import android.text.Editable;
import com.avito.android.remote.auth.AuthSource;
import com.avito.android.remote.model.Navigation;
import com.avito.android.remote.model.category_parameters.AutoGeneratedValue;
import com.avito.android.remote.model.category_parameters.ParametersTree;
import com.avito.android.remote.model.category_parameters.base.CategoryParameter;
import com.avito.android.remote.model.category_parameters.base.ParameterSlot;
import com.avito.android.util.BuildInfo;
import com.avito.android.util.Logs;
import com.avito.android.validation.CategoryParameterStringValueConverter;
import com.yandex.mobile.ads.video.tracking.Tracker;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import kotlin.Metadata;
import kotlin.jvm.internal.Intrinsics;
import org.jetbrains.annotations.NotNull;
@Metadata(bv = {1, 0, 3}, d1 = {"\u0000p\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\u0010\u000b\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u000e\n\u0000\n\u0002\u0010\b\n\u0002\b\u0003\n\u0002\u0010\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0010 \n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0010$\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0010%\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0002\b\u0004\u0018\u00002\b\u0012\u0004\u0012\u00020\u00020\u0001B3\u0012\u0012\u0010-\u001a\u000e\u0012\u0004\u0012\u00020\b\u0012\u0004\u0012\u00020,0 \u0012\u0006\u0010'\u001a\u00020$\u0012\u0006\u0010\u001f\u001a\u00020\u001c\u0012\u0006\u0010\u001b\u001a\u00020\u0018¢\u0006\u0004\b.\u0010/J\u000f\u0010\u0004\u001a\u00020\u0003H\u0016¢\u0006\u0004\b\u0004\u0010\u0005J7\u0010\u000f\u001a\u00020\u000e2\u0006\u0010\u0007\u001a\u00020\u00062\u0006\u0010\t\u001a\u00020\b2\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\f\u001a\u00020\n2\u0006\u0010\r\u001a\u00020\u0002H\u0016¢\u0006\u0004\b\u000f\u0010\u0010J\u0015\u0010\u0012\u001a\u0004\u0018\u00010\b*\u00020\u0011H\u0002¢\u0006\u0004\b\u0012\u0010\u0013R\u001c\u0010\u0017\u001a\b\u0012\u0004\u0012\u00020\u00110\u00148\u0002@\u0002X\u0004¢\u0006\u0006\n\u0004\b\u0015\u0010\u0016R\u0016\u0010\u001b\u001a\u00020\u00188\u0002@\u0002X\u0004¢\u0006\u0006\n\u0004\b\u0019\u0010\u001aR\u0016\u0010\u001f\u001a\u00020\u001c8\u0002@\u0002X\u0004¢\u0006\u0006\n\u0004\b\u001d\u0010\u001eR$\u0010#\u001a\u0010\u0012\u0004\u0012\u00020\b\u0012\u0006\u0012\u0004\u0018\u00010\b0 8\u0002@\u0002X\u0004¢\u0006\u0006\n\u0004\b!\u0010\"R\u0016\u0010'\u001a\u00020$8\u0002@\u0002X\u0004¢\u0006\u0006\n\u0004\b%\u0010&R(\u0010+\u001a\u000e\u0012\u0004\u0012\u00020\b\u0012\u0004\u0012\u00020\u00020(8\u0002@\u0002X\u0004¢\u0006\f\n\u0004\b\u0012\u0010\"\u0012\u0004\b)\u0010*¨\u00060"}, d2 = {"Lcom/avito/android/autogenerated_value/ParameterAttributesVisitor;", "Lcom/avito/android/autogenerated_value/AutogeneratedValueVisitor;", "Lcom/avito/android/remote/model/category_parameters/AutoGeneratedValue$Attribute$ParameterAttribute;", "", "canGenerate", "()Z", "Landroid/text/Editable;", "editable", "", "template", "", Tracker.Events.CREATIVE_START, "end", "attribute", "", "visit", "(Landroid/text/Editable;Ljava/lang/String;IILcom/avito/android/remote/model/category_parameters/AutoGeneratedValue$Attribute$ParameterAttribute;)V", "Lcom/avito/android/remote/model/category_parameters/base/ParameterSlot;", AuthSource.SEND_ABUSE, "(Lcom/avito/android/remote/model/category_parameters/base/ParameterSlot;)Ljava/lang/String;", "", AuthSource.BOOKING_ORDER, "Ljava/util/List;", "patternParameters", "Lcom/avito/android/util/BuildInfo;", "f", "Lcom/avito/android/util/BuildInfo;", "buildInfo", "Lcom/avito/android/validation/CategoryParameterStringValueConverter;", "e", "Lcom/avito/android/validation/CategoryParameterStringValueConverter;", "valueConverter", "", "c", "Ljava/util/Map;", "patternParametersValues", "Lcom/avito/android/remote/model/category_parameters/ParametersTree;", "d", "Lcom/avito/android/remote/model/category_parameters/ParametersTree;", "parametersTree", "", "getParameterAttributes$annotations", "()V", "parameterAttributes", "Lcom/avito/android/remote/model/category_parameters/AutoGeneratedValue$Attribute;", Navigation.ATTRIBUTES, "<init>", "(Ljava/util/Map;Lcom/avito/android/remote/model/category_parameters/ParametersTree;Lcom/avito/android/validation/CategoryParameterStringValueConverter;Lcom/avito/android/util/BuildInfo;)V", "item-temporary_release"}, k = 1, mv = {1, 4, 2})
public final class ParameterAttributesVisitor implements AutogeneratedValueVisitor<AutoGeneratedValue.Attribute.ParameterAttribute> {
    public final Map<String, AutoGeneratedValue.Attribute.ParameterAttribute> a;
    public final List<ParameterSlot> b;
    public final Map<String, String> c;
    public final ParametersTree d;
    public final CategoryParameterStringValueConverter e;
    public final BuildInfo f;

    public ParameterAttributesVisitor(@NotNull Map<String, ? extends AutoGeneratedValue.Attribute> map, @NotNull ParametersTree parametersTree, @NotNull CategoryParameterStringValueConverter categoryParameterStringValueConverter, @NotNull BuildInfo buildInfo) {
        Intrinsics.checkNotNullParameter(map, Navigation.ATTRIBUTES);
        Intrinsics.checkNotNullParameter(parametersTree, "parametersTree");
        Intrinsics.checkNotNullParameter(categoryParameterStringValueConverter, "valueConverter");
        Intrinsics.checkNotNullParameter(buildInfo, "buildInfo");
        this.d = parametersTree;
        this.e = categoryParameterStringValueConverter;
        this.f = buildInfo;
        LinkedHashMap linkedHashMap = new LinkedHashMap();
        for (Map.Entry<String, ? extends AutoGeneratedValue.Attribute> entry : map.entrySet()) {
            Object value = entry.getValue();
            AutoGeneratedValue.Attribute.ParameterAttribute parameterAttribute = (AutoGeneratedValue.Attribute.ParameterAttribute) (!(value instanceof AutoGeneratedValue.Attribute.ParameterAttribute) ? null : value);
            if (parameterAttribute != null) {
                AutoGeneratedValue.Attribute.ParameterAttribute parameterAttribute2 = (AutoGeneratedValue.Attribute.ParameterAttribute) linkedHashMap.put(entry.getKey(), parameterAttribute);
            }
        }
        this.a = linkedHashMap;
        Collection<AutoGeneratedValue.Attribute.ParameterAttribute> values = linkedHashMap.values();
        ArrayList<ParameterSlot> arrayList = new ArrayList();
        for (AutoGeneratedValue.Attribute.ParameterAttribute parameterAttribute3 : values) {
            ParameterSlot findParameter = this.d.findParameter(parameterAttribute3.getParameterId());
            if (findParameter != null) {
                arrayList.add(findParameter);
            }
        }
        this.b = arrayList;
        LinkedHashMap linkedHashMap2 = new LinkedHashMap();
        for (ParameterSlot parameterSlot : arrayList) {
            linkedHashMap2.put(parameterSlot.getId(), a(parameterSlot));
        }
        this.c = linkedHashMap2;
    }

    public final String a(ParameterSlot parameterSlot) {
        if (parameterSlot instanceof CategoryParameter) {
            return this.e.getValue((CategoryParameter) parameterSlot);
        }
        String str = "Can't get string value from " + parameterSlot;
        if (!this.f.isDebug()) {
            Logs.error$default(str, null, 2, null);
            return null;
        }
        throw new UnsupportedOperationException(str);
    }

    /* JADX WARNING: Code restructure failed: missing block: B:24:0x0079, code lost:
        if ((r2.length() > 0) != false) goto L_0x007e;
     */
    /* JADX WARNING: Removed duplicated region for block: B:28:0x0082  */
    /* JADX WARNING: Removed duplicated region for block: B:32:0x0087 A[SYNTHETIC] */
    @Override // com.avito.android.autogenerated_value.AutogeneratedValueVisitor
    /* Code decompiled incorrectly, please refer to instructions dump. */
    public boolean canGenerate() {
        /*
            r8 = this;
            java.util.Map<java.lang.String, com.avito.android.remote.model.category_parameters.AutoGeneratedValue$Attribute$ParameterAttribute> r0 = r8.a
            java.util.List<com.avito.android.remote.model.category_parameters.base.ParameterSlot> r1 = r8.b
            boolean r2 = r0.isEmpty()
            r3 = 1
            r4 = 0
            if (r2 == 0) goto L_0x000e
            goto L_0x0088
        L_0x000e:
            java.util.Set r0 = r0.entrySet()
            java.util.Iterator r0 = r0.iterator()
        L_0x0016:
            boolean r2 = r0.hasNext()
            if (r2 == 0) goto L_0x0088
            java.lang.Object r2 = r0.next()
            java.util.Map$Entry r2 = (java.util.Map.Entry) r2
            java.lang.Object r5 = r2.getValue()
            com.avito.android.remote.model.category_parameters.AutoGeneratedValue$Attribute$ParameterAttribute r5 = (com.avito.android.remote.model.category_parameters.AutoGeneratedValue.Attribute.ParameterAttribute) r5
            java.lang.Boolean r5 = r5.getRequired()
            java.lang.Boolean r6 = java.lang.Boolean.FALSE
            boolean r5 = kotlin.jvm.internal.Intrinsics.areEqual(r5, r6)
            if (r5 != 0) goto L_0x0084
            java.lang.Object r2 = r2.getValue()
            com.avito.android.remote.model.category_parameters.AutoGeneratedValue$Attribute$ParameterAttribute r2 = (com.avito.android.remote.model.category_parameters.AutoGeneratedValue.Attribute.ParameterAttribute) r2
            java.lang.String r2 = r2.getParameterId()
            java.util.Iterator r5 = r1.iterator()
        L_0x0042:
            boolean r6 = r5.hasNext()
            if (r6 == 0) goto L_0x005a
            java.lang.Object r6 = r5.next()
            r7 = r6
            com.avito.android.remote.model.category_parameters.base.ParameterSlot r7 = (com.avito.android.remote.model.category_parameters.base.ParameterSlot) r7
            java.lang.String r7 = r7.getId()
            boolean r7 = kotlin.jvm.internal.Intrinsics.areEqual(r7, r2)
            if (r7 == 0) goto L_0x0042
            goto L_0x005b
        L_0x005a:
            r6 = 0
        L_0x005b:
            com.avito.android.remote.model.category_parameters.base.ParameterSlot r6 = (com.avito.android.remote.model.category_parameters.base.ParameterSlot) r6
            if (r6 == 0) goto L_0x007e
            boolean r2 = r6 instanceof com.avito.android.remote.model.category_parameters.base.EditableParameter
            if (r2 == 0) goto L_0x006a
            com.avito.android.remote.model.category_parameters.base.EditableParameter r6 = (com.avito.android.remote.model.category_parameters.base.EditableParameter) r6
            boolean r2 = r6.hasValue()
            goto L_0x007f
        L_0x006a:
            java.lang.String r2 = r8.a(r6)
            if (r2 == 0) goto L_0x007c
            int r2 = r2.length()
            if (r2 <= 0) goto L_0x0078
            r2 = 1
            goto L_0x0079
        L_0x0078:
            r2 = 0
        L_0x0079:
            if (r2 == 0) goto L_0x007c
            goto L_0x007e
        L_0x007c:
            r2 = 0
            goto L_0x007f
        L_0x007e:
            r2 = 1
        L_0x007f:
            if (r2 == 0) goto L_0x0082
            goto L_0x0084
        L_0x0082:
            r2 = 0
            goto L_0x0085
        L_0x0084:
            r2 = 1
        L_0x0085:
            if (r2 != 0) goto L_0x0016
            r3 = 0
        L_0x0088:
            return r3
        */
        throw new UnsupportedOperationException("Method not decompiled: com.avito.android.autogenerated_value.ParameterAttributesVisitor.canGenerate():boolean");
    }

    public void visit(@NotNull Editable editable, @NotNull String str, int i, int i2, @NotNull AutoGeneratedValue.Attribute.ParameterAttribute parameterAttribute) {
        T t;
        Intrinsics.checkNotNullParameter(editable, "editable");
        Intrinsics.checkNotNullParameter(str, "template");
        Intrinsics.checkNotNullParameter(parameterAttribute, "attribute");
        Iterator<T> it = this.b.iterator();
        while (true) {
            if (!it.hasNext()) {
                t = null;
                break;
            }
            t = it.next();
            if (Intrinsics.areEqual(t.getId(), parameterAttribute.getParameterId())) {
                break;
            }
        }
        T t2 = t;
        String str2 = "";
        if (t2 == null) {
            editable.replace(i, i2, str2);
            return;
        }
        String prefix = parameterAttribute.getPrefix();
        if (prefix == null) {
            prefix = str2;
        }
        String postfix = parameterAttribute.getPostfix();
        if (postfix == null) {
            postfix = str2;
        }
        String str3 = this.c.get(t2.getId());
        if (str3 != null) {
            str2 = str3;
        }
        editable.replace(i, i2, a.e3(prefix, str2, postfix));
    }
}
